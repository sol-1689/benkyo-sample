
# Webサイトを表示する仕組み

## なにこれ？  
皆さんはChromeやSafariなどのブラウザから、googleやyoutubeなどのWebサイトを表示したことがあるかと思います。  
ただ、どのような仕組みでWebサイトが表示されているかまでは分かってない方もいるのではないでしょうか。

弊社の開発案件ではそのようなブラウザからアクセスするWebサイトを作成することも多く、どのような仕組みかを理解する必要があります。

この記事はWebサイトを表示する仕組みを理解できるようになることを目的としています。


## 対象者
Webサイトを表示する仕組みがいまいちよく分からない人  

## 

## Webサイト表示の流れ
まず初めに、Webサイトを表示する際の大まかな流れを記載します。
その後に、それぞれのフェーズの細かい内容を説明していきます。

1. （人）ブラウザ上にURLを入力


1. （ブラウザ）URLからWebサーバーのIPを取得  
正確にはOSに依頼しています。

1. （ブラウザ）IPを取得したWebサーバーに対して、HTTPと呼ばれる形式のメッセージを送信（HTTPリクエストと呼ばれます。）  
送信する処理はOSに依頼しています。

1. （Webサーバー）HTTPリクエストを受け取り、リクエスト内容に応じて返却したい値を作成  
Html、Css、javascriptなどの、ブラウザが画面を描画する為に必要なファイルを返却します。

1. （Webサーバー）HTTP形式のメッセージで作成した値を返却（HTTPレスポンスと呼ばれます。）

1. （ブラウザ）HTTPレスポンスからWebサーバーが返却した（Htmlなどの）値を取り出し、その内容に応じで画面を描画する。


図



## 各部分の詳細

### （ブラウザ）URLからWebサーバーのIPを取得  

図  


### （ブラウザ）Webサーバーに対してHTTPリクエストを送信  
この部分の動作を理解するためには、まずHTTPとは何かについて理解する必要があります。  

#### HTTPとは  

ブラウザーなどのウェブクライアントとWebサーバーの間で、HTMLファイルなどのさまざまなデータをやりとりするために使用するプロトコル（通信規約）のことです。  
プロトコルの仕様はIETFという標準化団体が策定しています。  
参考：[仕様文書](https://triple-underscore.github.io/rfc-others/RFC2616-ja.html#section-4)  


HTTPメッセージと呼ばれる、必要な情報を記述した文字列をやり取りします。  
メッセージの構文（どこにどんな情報をどうやって記載するか）はHTTPのプロトコルの1部として[規定](https://triple-underscore.github.io/rfc-others/RFC2616-ja.html#section-4)されています。  

HTTPメッセージには以下の2種類があります。  
- HTTPリクエスト  
クライアントが送信してサーバーにアクションを起こさせる為のHTTPメッセージ  

- HTTPレスポンス  
HTTPリクエストに対するサーバーの回答であるHTTPメッセージ  


図

#### HTTPリクエストの内容
ブラウザがなどのクライアントが送信するHTTPリクエストは、以下のような文字列になります。  
例  


HTTPリクエストは大まかに以下のブロックに分かれます。  
- 開始行  
要求メソッド、絶対 URL からプロトコル名とドメイン名を除いたもの、HTTP プロトコルのバージョン

- HTTPヘッダー  
サーバーに対してどの種類 (例えば、言語や MIME タイプ) のデータが適切かを示す情報や、サーバーの動作を変える (例えば、すでにキャッシュされている場合は回答を送信しない) データを与えます。これらの HTTP ヘッダーは空行で終わるブロックを構成します。


- 本文  
最後のブロックは省略可能なデータブロックで、主に POST メソッドで使用される追加のデータを含みます。

#### HTTPメソッド

- GET

- POST

API公開している例上げる

URLは同じですがにHTTPメソッドの違いにより動作が異なります。  
APIを利用する側にとっても分かりやすい為、物ような作りになっている物も多いです。



#### ブラウザがHTTPリクエストを送るタイミング

- URL欄から遷移



- formからのsubmit


#### Webサーバーへのパラメータの渡し方

- クエリストリング


- リクエストボデイ
  - formのsubmit時

  - プログラムでの実装時 






## 仕様の策定について
HTTPやHTMLなどの仕様策定団体にはブラウザやWebアプリの主要な開発団体も参加しています。  


#### コラム IE



## Webアプリケーションとは
Webサイトの集合体。
例えばECサイトならマイページ、商品一覧、注文ページなど、それらを表示する為の機能をまとめたものをWebアプリケーションという。

図
各ページの図＋プログラムをWebサイトに乗せる図？





・MDN HTTPについての説明サイト
https://developer.mozilla.org/ja/docs/Web/HTTP



・サーバー
https://wa3.i-3-i.info/word144.html


・tomcat
https://wa3.i-3-i.info/word12843.html
https://thinkit.co.jp/free/article/0708/2/1
https://agency-star.co.jp/column/tomcat


・アプリケーションサーバー

https://www.otsuka-shokai.co.jp/words/application-server.html

アプリケーションサーバーにはアプリケーションプログラムによって以下のような種類がある。
（1）Java：「Tomcat」「Glass Fish」
（2）PHP：「Apache」
（3）Ruby：「Unicorn」「Thin」「Rainbows」「Puma」

マイクロソフトのIIS（Internet Information Services）はWebサーバーとアプリケーションサーバーの機能を統合しVisual Basic、C#などの言語で記述したプログラムが作動している。

Appサーバーをwebサーバーとして利用しない理由
https://qiita.com/yCroma/items/e46476e2ac7c372bb2a3

2015年Webサーバアーキテクチャ序論
https://blog.yuuk.io/entry/2015-webserver-architecture



・ブラウザ周りの仕様
https://qiita.com/megmogmog1965/items/e180d02be711cecdc038
