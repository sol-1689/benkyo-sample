# Webサーバーの構成  

## なにこれ？  
別の記事で紹介したWebサーバーの部分についてより詳しく説明します。  



図


## Webサーバーアプリの役割  
Webサーバーアプリの主な機能は、クライアントからのHTTPリクエストを受け取り、応答としてhtmlなどを返却することです。   
ただそれだけでは無く、他にも以下のようなことが出来ます。  

- 特定IPアドレスの場合フィルタ（リクエストを許可/拒否）する
- 特定URLの場合リダイレクトさせる
- 特定URLの拒否
- SSL化による通信の暗号化
- リクエストに応じて特定のサーバへ処理を振り分ける
- リクエスト・レスポンスヘッダーの書き換え

このように、Httpリクエストをどうさばくかを定義できるのがWebサーバーアプリです。  


### 代表的なWebサーバーアプリ

- nginx


- apache Http Server


- IIS



## Webサーバーアプリで出来ないこと（動的コンテンツの作成）

Webサーバーアプリだけでもクライアントからのリクエストに応答できるのですが、Webサーバーアプリだけだと実現しにくい機能があります。  
それが**動的コンテンツ**の作成です。   
対になる**静的コンテンツと**一緒に以下説明します。  

- 静的コンテンツ  
閲覧する条件によって内容が変わらないコンテンツ。  
ヘルプページや利用規約ページのhtmlや、画像ファイルや外部ファイルとして定義してcss、javascriptなど。    

- 動的コンテンツ  
閲覧する条件によって内容が変わるコンテンツ。  
例えばマイページのようなユーザーによって内容が変わるWebページや、検索条件によって内容が変わる商品一覧ページのhtmlなど。    
案件で開発するWebシステムの場合、はこのような動的コンテンツを作成する必要があることがほとんどです。  


動的コンテンツを作成する為には、DBなどから動的に変わる箇所の情報（ユーザー名など）を取得し、それをもとに返却するコンテンツ（Htmlなど）を作成する、といった処理を行うプログラムが必要になります。  
（このようなプログラムはJavaやC#などで実装します。） 

ただ、Webサーバーアプリにはそのようなプログラムを動かす機能がありません*。  
そのため、プログラムを動作させるためのアプリが必要になります。　　
そのようなアプリを**アプリケーションサーバー**といいます。  

*後述しますがWebサーバーアプリや言語によってはプログラムを動作させることも出来ます。  ただその場合でも役割を分けることが多いです。  


## アプリケーションサーバー  
javaやC#などで作成したプログラムを動作させるためのサーバーアプリです。  
以下の処理を行います。  

1. Httpリクエストを受け取り、リクエスト内容に応じたプログラムを実行し、結果(Htmlなど)を作成

1. 結果をHttpレスポンスで返却





